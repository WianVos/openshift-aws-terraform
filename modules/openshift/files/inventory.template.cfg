# OpenShift Inventory Template.
# Note that when the infrastructure is generated by terraform, this file is
# expanded into './inventory.cfg', based on the rules in:
#
#   ./modules/openshift/12-inventory.tf

# Create an OSEv3 group that contains the masters and nodes groups
[OSEv3:children]
masters
nodes
etcd

[OSEv3:vars]
ansible_ssh_user=ec2-user
ansible_become=true
deployment_type=origin
openshift_master_cluster_method=native
openshift_master_cluster_hostname=${public_hostname}
openshift_master_cluster_public_hostname=${public_hostname}
openshift_hosted_metrics_deploy=true
openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

# Use API keys i/o instance roles so that tenant containers don't get Openshift's EC2/EBS permissions
openshift_cloudprovider_kind=aws
openshift_cloudprovider_aws_access_key=${access_key}
openshift_cloudprovider_aws_secret_key=${secret_key}

[masters]
ose-master0[1:3].${hosted_zone}

[etcd]
ose-master0[1:3].${hosted_zone}

[nodes]
ose-master0[1:3].${hosted_zone}
ose-infra-node0[1:3].${hosted_zone} openshift_node_labels="{'region': 'infra', zone: 'default'}"
ose-app_node0[1:${app_node_count}].${hosted_zone} openshift_node_labels="{'region': 'primary', 'zone': 'default'}"
